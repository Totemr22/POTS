import 'package:flutter/material.dart';

void main() {
  runApp(const SpotifyMockApp());
}

class SpotifyMockApp extends StatelessWidget {
  const SpotifyMockApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Spotify UI Mock',
      debugShowCheckedModeBanner: false,
      theme: ThemeData(
        brightness: Brightness.dark,
        scaffoldBackgroundColor: const Color(0xFF121212),
        fontFamily: 'Roboto',
        useMaterial3: true,
      ),
      home: const SpotifyHomePage(),
    );
  }
}

/// Altura del mini-player (para dejar espacio al hacer scroll)
const double kMiniPlayerHeight = 70;

class SpotifyHomePage extends StatelessWidget {
  const SpotifyHomePage({super.key});

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      // App “a pantalla completa” con SliverAppBar colapsable
      body: Stack(
        children: [
          CustomScrollView(
            slivers: [
              SliverAppBar(
                pinned: true,
                expandedHeight: 140,
                backgroundColor: const Color(0xFF121212),
                elevation: 0,
                titleSpacing: 0,
                leadingWidth: 0,
                flexibleSpace: FlexibleSpaceBar(
                  background: _HeaderGradient(
                    child: SafeArea(
                      bottom: false,
                      child: Padding(
                        padding: const EdgeInsets.fromLTRB(16, 16, 16, 0),
                        child: Column(
                          crossAxisAlignment: CrossAxisAlignment.start,
                          children: [
                            Row(
                              children: [
                                const Spacer(),
                                IconButton(
                                  onPressed: () {},
                                  icon: const Icon(Icons.settings_outlined),
                                  tooltip: 'Ajustes',
                                ),
                              ],
                            ),
                            const SizedBox(height: 8),
                            const Text(
                              '¡Buenas noches!',
                              style: TextStyle(
                                fontSize: 28,
                                fontWeight: FontWeight.w800,
                                letterSpacing: -0.5,
                              ),
                            ),
                          ],
                        ),
                      ),
                    ),
                  ),
                ),
              ),

              // GRID de 2 columnas (tarjetas tipo “rápido acceso”)
              SliverPadding(
                padding: const EdgeInsets.fromLTRB(16, 12, 16, 8),
                sliver: SliverGrid(
                  gridDelegate: const SliverGridDelegateWithFixedCrossAxisCount(
                    crossAxisCount: 2,
                    mainAxisSpacing: 12,
                    crossAxisSpacing: 12,
                    childAspectRatio: 2.9, // rectangular como en Spotify
                  ),
                  delegate: SliverChildListDelegate.fixed([
                    for (final title in [
                      'classic soul',
                      'Radar de\nNovedades',
                      'Descubrimiento\nsemanal',
                      'Country Rock',
                      'James Morrison',
                      'Clarence "Frogman"\n…',
                    ])
                      _QuickCard(title: title),
                  ]),
                ),
              ),

              // Sección “Vuelve a...”
              const _SectionHeader(title: 'Vuelve a...'),
              SliverToBoxAdapter(
                child: SizedBox(
                  height: 190,
                  child: ListView.separated(
                    padding: const EdgeInsets.symmetric(horizontal: 16),
                    scrollDirection: Axis.horizontal,
                    itemCount: 12,
                    separatorBuilder: (_, __) => const SizedBox(width: 12),

